<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Tienda Online</title>
    
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        header {
            background-color: #007acc;
            color: white;
            padding: 15px;
            text-align: center;
        }

        header nav {
            margin-top: 10px;
        }

        header nav a {
            color: white;
            margin: 0 15px; 
            text-decoration: none;
            font-weight: bold;
            transition: color 0.2s ease;
        }

        header nav a:hover {
            color: #e0e0e0;
        }

        main {
            padding: 20px;
            max-width: 900px;
            margin: auto;
            background-color: white;
            min-height: 80vh;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        footer {
            background-color: #eee;
            text-align: center;
            padding: 10px;
            font-size: 0.9em;
            color: #555;
        }
    </style>
</head>
<body>
    <header>
        <h1>Backend Final - Emiliano Silva</h1>
        <nav>
            <a href="/">Catálogo</a>
            <a href="/realtimeproducts">Productos en Tiempo Real</a>
            <!-- ✅ ENLACE AL CARRITO ✅ -->
            <a href="#" id="cartLink">Mi Carrito</a>
        </nav>
    </header>

    <main>
        {{{ body }}} {{! Este es el ÚNICO marcador de posición para el contenido de las vistas }}
    </main>

    <footer>
        &copy; 2024 - Proyecto Backend con MongoDB, Express y Handlebars
    </footer>

    <script>
        // Script para actualizar el enlace del carrito en el header
        document.addEventListener('DOMContentLoaded', () => {
            const cartLink = document.getElementById('cartLink');
            if (cartLink) {
                const storedCartId = localStorage.getItem('userCartId');
                if (storedCartId) {
                    cartLink.href = `/carts/${storedCartId}`;
                } else {
                   
                    cartLink.href = '/'; 
                }
            }
        });
    </script>
</body>
</html>